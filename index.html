<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>å¿ƒè·³æ¨¡æ“¬å™¨</title>
</head>
<body style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:#111;color:#fff;font-family:sans-serif;">
  <h1>ğŸ’œ å¿ƒè·³æ¨¡æ“¬å™¨</h1>
  <button id="startCalm" style="padding:10px 20px;font-size:18px;cursor:pointer;">å¹³éœæ¨¡å¼</button>
  <button id="startNervous" style="padding:10px 20px;font-size:18px;margin-top:10px;cursor:pointer;">ç·Šå¼µæ¨¡å¼</button>
  <button id="stopBtn" style="padding:10px 20px;font-size:18px;margin-top:10px;cursor:pointer;">åœæ­¢</button>

  <script>
    let audioCtx;
    let intervalId;

    function playHeartbeat(interval = 1000) {
      if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }

      // æ¨¡æ“¬å¿ƒè·³ "å’š"
      function beat() {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();

        osc.type = "sine"; // æ­£å¼¦æ³¢
        osc.frequency.setValueAtTime(60, audioCtx.currentTime); // ä½é » 60Hz

        gain.gain.setValueAtTime(0, audioCtx.currentTime);
        gain.gain.linearRampToValueAtTime(1, audioCtx.currentTime + 0.05);
        gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);

        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start();
        osc.stop(audioCtx.currentTime + 0.3);
      }

      // æ¨¡æ“¬é›™å¿ƒè·³ï¼šå’š-å’š
      beat();
      setTimeout(beat, 300);
    }

    function startMode(interval) {
      if (intervalId) clearInterval(intervalId);
      playHeartbeat(interval);
      intervalId = setInterval(() => playHeartbeat(interval), interval);
    }

    document.getElementById("startCalm").onclick = () => startMode(1000); // å¹³éœï¼š1ç§’
    document.getElementById("startNervous").onclick = () => startMode(600); // ç·Šå¼µï¼š0.6ç§’

    document.getElementById("stopBtn").onclick = () => {
      clearInterval(intervalId);
      intervalId = null;
    };
  </script>
</body>
</html>
